{"version":3,"file":"index-BFsju5_S.js","names":[],"sources":["../../src/main.js"],"sourcesContent":["import './style.css'\n\n// Theme management\nconst themeToggle = document.getElementById('theme-toggle');\nconst themeIcon = document.querySelector('.theme-icon');\nconst htmlElement = document.documentElement;\n\n// Load saved theme or default to light\nconst savedTheme = localStorage.getItem('theme') || 'light';\nhtmlElement.setAttribute('data-theme', savedTheme);\nupdateThemeIcon(savedTheme);\n\nthemeToggle.addEventListener('click', () => {\n    const currentTheme = htmlElement.getAttribute('data-theme');\n    const newTheme = currentTheme === 'light' ? 'dark' : 'light';\n\n    htmlElement.setAttribute('data-theme', newTheme);\n    localStorage.setItem('theme', newTheme);\n    updateThemeIcon(newTheme);\n});\n\nfunction updateThemeIcon(theme) {\n    themeIcon.textContent = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';\n}\n\n// Comic book viewer\nlet pages = [];\nlet currentPage = 0;\n\nconst pageDisplay = document.getElementById('page-display');\nconst pageSlider = document.getElementById('page-slider');\nconst currentPageSpan = document.getElementById('current-page');\nconst totalPagesSpan = document.getElementById('total-pages');\nconst arrowLeft = document.getElementById('arrow-left');\nconst arrowRight = document.getElementById('arrow-right');\nconst pageDisplayWrapper = document.getElementById('page-display-wrapper');\n\n// Load images from Pages folder by checking numbered files\nasync function loadPages() {\n    // Show loading screen\n    pageDisplay.innerHTML = '<div class=\"loading\">Scanning for pages...</div>';\n    totalPagesSpan.textContent = '?';\n\n    try {\n        const extensions = ['png', 'jpg', 'jpeg', 'gif', 'webp'];\n        const maxPages = 100;\n        const foundPages = new Map();\n\n        // Check for numbered files starting from 1\n        let consecutiveMissing = 0;\n        for (let i = 1; i <= maxPages; i++) {\n            let found = false;\n            \n            for (const ext of extensions) {\n                const url = `/Pages/${i}.${ext}`;\n\n                try {\n                    const response = await fetch(url, { method: 'HEAD' });\n                    \n                    // FIXED LOGIC HERE:\n                    // We check if the response is OK AND if the content-type is an image\n                    const contentType = response.headers.get('content-type');\n                    \n                    if (response.ok && contentType && contentType.startsWith('image/')) {\n                        foundPages.set(i, url);\n                        found = true;\n                        consecutiveMissing = 0;\n                        pageDisplay.innerHTML = `<div class=\"loading\">Found ${foundPages.size} pages...</div>`;\n                        break;\n                    }\n                } catch (e) {\n                    continue;\n                }\n            }\n\n            if (!found) {\n                consecutiveMissing++;\n                // Stop if we haven't found a page in 5 consecutive checks\n                if (consecutiveMissing >= 5 && foundPages.size > 0) {\n                    break;\n                }\n            }\n        }\n\n        pages = Array.from(foundPages.entries())\n            .sort((a, b) => a[0] - b[0])\n            .map(entry => entry[1]);\n\n        if (pages.length === 0) {\n            pageDisplay.innerHTML = '<div class=\"error\">No pages found in ./Pages folder.<br>Please add images with names like: 1.png, 2.png, etc.</div>';\n            totalPagesSpan.textContent = '0';\n            return;\n        }\n\n        pageSlider.max = pages.length;\n        totalPagesSpan.textContent = pages.length;\n        pageDisplay.innerHTML = `<div class=\"loading\">Loading page 1 of ${pages.length}...</div>`;\n\n        currentPage = 0;\n        displayPage();\n\n    } catch (error) {\n        pageDisplay.innerHTML = `<div class=\"error\">Error loading pages: ${error.message}</div>`;\n        totalPagesSpan.textContent = '0';\n    }\n}\n\nfunction displayPage() {\n    if (pages.length === 0) return;\n\n    const img = document.createElement('img');\n    img.src = pages[currentPage];\n    img.alt = `Page ${currentPage + 1}`;\n\n    img.onerror = () => {\n        pageDisplay.innerHTML = '<div class=\"error\">Error loading image</div>';\n    };\n\n    pageDisplay.innerHTML = '';\n    pageDisplay.appendChild(img);\n\n    // Update slider and page info\n    const pageNumber = currentPage + 1;\n    pageSlider.value = pageNumber;\n    currentPageSpan.textContent = pageNumber;\n\n    // Update arrow visibility\n    arrowLeft.style.display = currentPage === 0 ? 'none' : 'flex';\n    arrowRight.style.display = currentPage === pages.length - 1 ? 'none' : 'flex';\n}\n\nfunction goToPage(pageIndex) {\n    console.log(\"Calling goToPage\",pages[currentPage])\n    if (pageIndex >= 0 && pageIndex < pages.length) {\n        currentPage = pageIndex;\n       \n        displayPage();\n    }\n}\n\nfunction nextPage() {\n    console.log(\"going forward\",currentPage,currentPage+1);\n    if (currentPage < pages.length - 1) {\n        goToPage(currentPage + 1);\n    }\n}\n\nfunction prevPage() {\n    console.log(\"going back\",currentPage,currentPage-1);\n    if (currentPage > 0) {\n        goToPage(currentPage - 1);\n    }\n}\n\n// Slider event\npageSlider.addEventListener('input', (e) => {\n    goToPage(parseInt(e.target.value) - 1);\n});\n\n// Arrow click events\narrowLeft.addEventListener('click', prevPage);\narrowRight.addEventListener('click', nextPage);\n\n// Keyboard navigation\ndocument.addEventListener('keydown', (e) => {\n    if (e.key === 'ArrowLeft') {\n        prevPage();\n    } else if (e.key === 'ArrowRight') {\n        nextPage();\n    }\n});\n\n// Show arrows on hover\npageDisplayWrapper.addEventListener('mouseenter', () => {\n    arrowLeft.classList.add('visible');\n    arrowRight.classList.add('visible');\n});\n\npageDisplayWrapper.addEventListener('mouseleave', () => {\n    arrowLeft.classList.remove('visible');\n    arrowRight.classList.remove('visible');\n});\n\n// Initialize\nloadPages();\n"],"mappings":"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"}